<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }

      #map {
        height: 100%;
      }
      
    </style>
  </head>
  <body>
    <div id="map"></div>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDE8fwiCz_eMdxWJ7B9q1uDW6Vqy8n1xGg"></script>


    <script>



      var eventArr =
      [{
        eventAddress:"6717,Blarwood dr,austin,tx,78745",
        eventDate:"09/27/2016"
      }, {
          eventAddress:"9613 castle pines dr,austin,tx",
          eventDate:"09/27/2016"
        }];  

    var p = initialiseGoogleMap(document.getElementById('map'),{
          zoom: 8,
          center: {lat: -34.397, lng: 150.644}
        });


    function initialiseGoogleMap(divID,mapParamObj){


      return new Promise(function(resolve,reject){
        var map = new google.maps.Map(divID,mapParamObj);
        var geocoder = new google.maps.Geocoder();

        if (map && geocoder){
          resolve({map:map,geocoder:geocoder});
        }else {reject ("error");}

      });
    }

p.then(geocodeEvents,function(err){console.log(err);});

function geocodeEvents(data){

   eventArr.forEach(function(ele){
        
            data.geocoder.geocode({'address': ele.eventAddress}, function(results, status) {
                if (status === 'OK') {
                    data.map.setCenter(results[0].geometry.location);
                    var contentString ='<div>'+ele.eventAddress+'<br>'+ele.eventDate+'</div>';

                    var infowindow = new google.maps.InfoWindow({
                      content: contentString
                    });
                    var marker = new google.maps.Marker({
                      map: data.map,
                      position: results[0].geometry.location
                    });

                    marker.addListener('click', function() {
                      infowindow.open(map, marker);
                    });

                } else {
                    alert('Geocode was not successful for the following reason: ' + status);
                }
            });
      });
}



      
    
    </script>
    
  </body>
</html>